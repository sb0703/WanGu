import '../models/buff.dart';
import '../models/stats.dart';

class BuffsRepository {
  static final Map<String, Buff> _buffs = {
    // --- 丹药与医术类 ---
    'spirit_backflow': const Buff(
      id: 'spirit_backflow',
      name: '灵气逆流',
      description: '内伤严重，灵力运转不畅。',
      type: BuffType.negative,
      statModifiers: Stats(
        maxSpirit: -10,
        spirit: -10,
        attack: -2,
        maxHp: 0,
        hp: 0,
        defense: 0,
        speed: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'meridian_blockage': const Buff(
      id: 'meridian_blockage',
      name: '经脉淤塞',
      description: '部分穴位被封，修炼速度减慢。',
      type: BuffType.negative,
      statModifiers: Stats(
        speed: -2,
        insight: -1,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        purity: 0,
      ),
    ),
    'missing_limb': const Buff(
      id: 'missing_limb',
      name: '肢体残缺',
      description: '断臂之痛，攻击力大幅下降。',
      type: BuffType.negative,
      statModifiers: Stats(
        attack: -10,
        speed: -2,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        defense: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'pill_poison': const Buff(
      id: 'pill_poison',
      name: '丹毒攻心',
      description: '服药过多，抗药性增加，气血上限受损。',
      type: BuffType.negative,
      statModifiers: Stats(
        maxHp: -20,
        hp: -20,
        purity: -10,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        insight: 0,
      ),
    ),
    'spirit_tear': const Buff(
      id: 'spirit_tear',
      name: '神识撕裂',
      description: '识海受创，时常晕眩。',
      type: BuffType.negative,
      statModifiers: Stats(
        insight: -5,
        maxSpirit: -20,
        spirit: -20,
        maxHp: 0,
        hp: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        purity: 0,
      ),
    ),

    // --- 天地与机缘类 ---
    'fire_poison': const Buff(
      id: 'fire_poison',
      name: '火毒攻心',
      description: '热症难消，每回合持续扣血（未实装持续扣血，暂时减上限）。',
      type: BuffType.negative,
      statModifiers: Stats(
        maxHp: -15,
        hp: -15,
        defense: -2,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        speed: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'inner_demon': const Buff(
      id: 'inner_demon',
      name: '心魔滋生',
      description: '道心不稳，修炼容易走火入魔。',
      type: BuffType.negative,
      statModifiers: Stats(
        purity: -20,
        insight: -3,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
      ),
    ),
    'void_exile': const Buff(
      id: 'void_exile',
      name: '虚空标记',
      description: '被虚空力量标记，容易遭遇空间乱流。',
      type: BuffType.negative,
      statModifiers: Stats(
        speed: -5,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'heaven_forsaken': const Buff(
      id: 'heaven_forsaken',
      name: '天道厌弃',
      description: '霉运缠身，机缘减少。',
      type: BuffType.negative,
      statModifiers: Stats(
        // 幸运属性未实装，暂时减悟性
        insight: -5,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        purity: 0,
      ),
    ),

    // --- 红尘与因果类 ---
    'broken_dao': const Buff(
      id: 'broken_dao',
      name: '道心破碎',
      description: '信念崩塌，全属性下降。',
      type: BuffType.negative,
      statModifiers: Stats(
        attack: -5,
        defense: -5,
        speed: -5,
        insight: -5,
        maxHp: -50,
        hp: -50,
        maxSpirit: -30,
        spirit: -30,
        purity: 0,
      ),
    ),
    'nemesis_lock': const Buff(
      id: 'nemesis_lock',
      name: '仇家锁定',
      description: '被强敌追杀，无法安心修炼。',
      type: BuffType.negative,
      statModifiers: Stats(
        // 修炼效率未实装buff影响，暂时无属性影响，仅作标记
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'twisted_nature': const Buff(
      id: 'twisted_nature',
      name: '性格扭曲',
      description: '行事乖张，容易招惹是非。',
      type: BuffType.negative,
      statModifiers: Stats(
        // 魅力未实装
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'yin_yang_reversal': const Buff(
      id: 'yin_yang_reversal',
      name: '阴阳逆转',
      description: '体内阴阳二气颠倒，性别发生改变。',
      type: BuffType.mixed,
      statModifiers: Stats(
        // 也许有一些特殊功法加成？暂时无
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        insight: 0,
        purity: 0,
      ),
    ),

    // --- 旁门与左道 (转化玩法) ---
    'tiger_arm': const Buff(
      id: 'tiger_arm',
      name: '虎臂',
      description: '接上了妖虎的手臂，力量大增。',
      type: BuffType.mixed,
      statModifiers: Stats(
        attack: 20,
        speed: -2,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        defense: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'mechanical_arm': const Buff(
      id: 'mechanical_arm',
      name: '偃甲义肢',
      description: '精钢打造的机关臂，坚硬无比。',
      type: BuffType.mixed,
      statModifiers: Stats(
        defense: 10,
        attack: 5,
        speed: -1,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'blind': const Buff(
      id: 'blind',
      name: '五感尽失',
      description: '双目失明，神识受损，悟性大幅下降。',
      type: BuffType.negative,
      statModifiers: Stats(
        insight: -10,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        purity: 0,
      ),
    ),
    'beast_form': const Buff(
      id: 'beast_form',
      name: '半妖化',
      description: '血脉逆行，化为半妖。肉身增强，但神智受损。',
      type: BuffType.mixed,
      statModifiers: Stats(
        attack: 10,
        speed: 5,
        insight: -5,
        purity: -20,
        maxHp: 20,
        hp: 0,
        maxSpirit: -10,
        spirit: -10,
        defense: 0,
      ),
    ),
    'void_sickness': const Buff(
      id: 'void_sickness',
      name: '虚空之疾',
      description: '被虚空力量侵蚀，本源受损。',
      type: BuffType.negative,
      statModifiers: Stats(
        maxHp: -20,
        hp: -20,
        maxSpirit: -10,
        spirit: -10,
        attack: 0,
        defense: 0,
        speed: 0,
        insight: 0,
        purity: 0,
      ),
    ),
    'cursed_land': const Buff(
      id: 'cursed_land',
      name: '天罚力场',
      description: '遭天道厌弃，修炼艰难。',
      type: BuffType.negative,
      statModifiers: Stats(
        insight: -5,
        purity: -5,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
      ),
    ),
    'karma_debt': const Buff(
      id: 'karma_debt',
      name: '因果缠身',
      description: '欠下不明存在的因果，霉运连连。',
      type: BuffType.negative,
      statModifiers: Stats(
        purity: -10,
        maxHp: -10,
        hp: -10,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
        insight: 0,
      ),
    ),
    'soul_parasite': const Buff(
      id: 'soul_parasite',
      name: '识海寄生',
      description: '域外天魔寄生体内，窃取修为。',
      type: BuffType.negative,
      statModifiers: Stats(
        insight: -5,
        purity: -20,
        maxHp: 0,
        hp: 0,
        maxSpirit: 0,
        spirit: 0,
        attack: 0,
        defense: 0,
        speed: 0,
      ),
    ),
    'kirin_arm': const Buff(
      id: 'kirin_arm',
      name: '麒麟臂',
      description: '传说中的麒麟臂，拥有毁天灭地的力量。',
      type: BuffType.positive,
      statModifiers: Stats(
        attack: 50,
        defense: 20,
        maxHp: 100,
        hp: 100,
        maxSpirit: 0,
        spirit: 0,
        speed: 0,
        insight: 0,
        purity: 0,
      ),
    ),
  };

  static Buff? get(String id) => _buffs[id];

  static List<Buff> getAll() => _buffs.values.toList();
}
